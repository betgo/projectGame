{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "game-project.schema.json",
  "title": "GameProject",
  "type": "object",
  "required": ["meta", "templateId", "map", "templatePayload", "editorState"],
  "properties": {
    "meta": {
      "type": "object",
      "required": ["name", "version"],
      "properties": {
        "name": { "type": "string", "minLength": 1 },
        "version": { "type": "string", "minLength": 1 }
      },
      "additionalProperties": false
    },
    "templateId": { "type": "string", "const": "tower-defense" },
    "map": {
      "type": "object",
      "required": ["width", "height", "cells"],
      "properties": {
        "width": { "type": "integer", "minimum": 4 },
        "height": { "type": "integer", "minimum": 4 },
        "cells": {
          "type": "array",
          "items": {
            "type": "array",
            "items": { "type": "integer", "minimum": 0, "maximum": 2 }
          }
        }
      },
      "additionalProperties": false
    },
    "templatePayload": { "$ref": "tower-defense.schema.json" },
    "editorState": {
      "type": "object",
      "required": ["selectedTool", "speed"],
      "properties": {
        "selectedTool": { "type": "string", "enum": ["empty", "path", "tower"] },
        "speed": { "type": "number", "minimum": 0.5, "maximum": 8 }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
